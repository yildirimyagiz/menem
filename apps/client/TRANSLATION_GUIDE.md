# Translation Management Guide

This guide explains how to manage translations in the Reservatior project using the built-in tools and scripts.

## Overview

The project uses `next-intl` for internationalization with the following structure:
- Translation files are located in `src/messages/`
- Base locale is English (`en.json`)
- Supported locales: `en`, `zh`, `es`, `ar`, `hi`, `fr`, `tr`, `fa`, `de`, `ja`, `it`, `ru`, `th`

## Translation Key Structure

The project follows a flat key structure (preferred over nested keys):
- ✅ Good: `favoritesStatsTotal`
- ❌ Avoid: `favoritesStats.total`

Translation keys use the `@facility/` prefix and single key names.

## Available Scripts

### 1. Check Translation Keys
```bash
pnpm check-translation-keys
```

**What it does:**
- Scans the codebase for `useTranslations()` usage
- Identifies missing translation keys
- Reports unused keys
- Shows completion status for all locales
- Generates a `missing-keys.json` file

**Output:**
- Missing keys that need to be added to `en.json`
- Unused keys that can be cleaned up
- Locale completion percentages

### 2. Translation Workflow
```bash
# Generate comprehensive report
pnpm translation-workflow

# Add missing keys to base locale
pnpm translation-workflow add-missing

# Generate template for specific locale
pnpm translation-workflow template <locale>

# Merge template into locale file
pnpm translation-workflow merge <locale>

# Validate translations
pnpm translation-workflow validate
```

### 3. Legacy Scripts (Still Available)
```bash
# Analyze locales
pnpm analyze-locales

# Organize locales
pnpm organize-locales

# Generate locale template
pnpm locale-template <locale>
```

## Workflow for Adding New Translations

### Step 1: Check Current Status
```bash
pnpm check-translation-keys
```

This will show you:
- Missing keys that need to be added
- Unused keys that can be removed
- Completion status for all locales

### Step 2: Add Missing Keys to Base Locale
```bash
pnpm translation-workflow add-missing
```

This adds all missing keys to `en.json` with placeholder values.

### Step 3: Translate for Other Locales
For each locale that needs translation:

```bash
# Generate template for the locale
pnpm translation-workflow template tr

# Edit the generated template file
# src/messages/tr-template.json

# Merge the template into the locale file
pnpm translation-workflow merge tr
```

### Step 4: Validate Translations
```bash
pnpm translation-workflow validate
```

This checks for any `[TODO:]` placeholders that need to be translated.

## Best Practices

### 1. Key Naming
- Use descriptive, flat key names
- Follow the pattern: `componentName.actionOrProperty`
- Examples: `favoritesStatsTotal`, `propertyDetails.title`

### 2. Adding New Translations
When adding new UI elements:

1. Use the translation hook:
```tsx
import { useTranslations } from 'next-intl';

const t = useTranslations('namespace');
return <div>{t('keyName')}</div>;
```

2. Add the key to `en.json`:
```json
{
  "namespace": {
    "keyName": "English text"
  }
}
```

3. Run the check script to identify missing keys in other locales

### 3. Maintaining Consistency
- Run `pnpm check-translation-keys` regularly
- Update translations when adding new features
- Keep the base locale (`en.json`) as the source of truth

## Troubleshooting

### Missing Translation Keys
If you see missing translation keys:

1. Run `pnpm check-translation-keys` to identify them
2. Add them to `en.json` with appropriate English text
3. Generate templates for other locales
4. Translate and merge the templates

### Unused Keys
If you see many unused keys:

1. Review them in the report
2. Remove keys that are no longer needed
3. Be careful not to remove keys that might be used dynamically

### Locale Completion Issues
If locales have low completion percentages:

1. Generate templates for incomplete locales
2. Translate the missing keys
3. Merge the templates back to the locale files

## File Structure

```
src/messages/
├── en.json          # Base locale (English)
├── zh.json          # Chinese
├── es.json          # Spanish
├── ar.json          # Arabic
├── hi.json          # Hindi
├── fr.json          # French
├── tr.json          # Turkish
├── fa.json          # Farsi/Persian
├── de.json          # German
├── ja.json          # Japanese
├── it.json          # Italian
├── ru.json          # Russian
├── th.json          # Thai
├── missing-keys.json    # Generated by check script
└── {locale}-template.json  # Generated templates
```

## Scripts Location

All translation management scripts are located in:
```
scripts/
├── check-translation-keys.ts
├── translation-workflow.ts
├── analyze-locales.ts
└── organize-locales.ts
```

## Regular Maintenance

To keep translations up to date:

1. **Weekly**: Run `pnpm check-translation-keys` to identify issues
2. **Monthly**: Run `pnpm translation-workflow validate` to check for incomplete translations
3. **Before releases**: Ensure all locales are complete and validated

## Support

If you encounter issues with translations:

1. Check the console output for specific error messages
2. Verify that translation keys exist in the base locale
3. Ensure the namespace matches between code and translation files
4. Run validation scripts to identify specific problems

## Quick Reference

| Command | Purpose |
|---------|---------|
| `pnpm check-translation-keys` | Check for missing/unused keys |
| `pnpm translation-workflow` | Generate comprehensive report |
| `pnpm translation-workflow add-missing` | Add missing keys to base |
| `pnpm translation-workflow template <locale>` | Generate template for locale |
| `pnpm translation-workflow merge <locale>` | Merge template to locale |
| `pnpm translation-workflow validate` | Validate all translations | 